<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>SetUp </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="SetUp ">
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://github.com/AutomotiveAIChallenge/aichallenge2023-sim/blob/main/documentation/docfx_project_en/setup/index.md/#L1">
  </head>

  <script type="module">
    import options from './../public/main.js'
    import { init } from './../public/docfx.min.js'
    init(options)
  </script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h2 id="setup">SetUp</h2>

<h2 id="minimum-hardware-requirements">Minimum Hardware Requirements</h2>
<p>We recommend the following PC operating environment for this tournament.</p>
<ul>
<li>OS: Ubuntu 22.04</li>
<li>CPU: Intel Corei7 (8 cores) or higher</li>
<li>GPU: NVIDIA Geforce RTX 3080 (VRAM 12 GB) or higher</li>
<li>Memory: 32 GB or more</li>
<li>Storage: SSD 30 GB or higher</li>
</ul>
<p>If you are unable to prepare a PC that meets the above specifications, please refer to the &quot;For participants with two PCs&quot; below.</p>
<h4 id="for-participants-with-two-pcs">For participants with two PCs</h4>
<h4 id="autoware-pc">Autoware PC</h4>
<ul>
<li>OS: Ubuntu 22.04</li>
<li>CPU: Intel Corei7 (8 cores) or higher</li>
<li>GPU: NVIDIA Geforce GTX 1080 or higher</li>
<li>Memory: 16 GB or higher</li>
<li>Storage: SSD 10 GB or higher</li>
<li>For more information <a href="https://autowarefoundation.github.io/autoware-documentation/main/installation/">here</a></li>
</ul>
<h4 id="awsim-pc">AWSIM PC</h4>
<ul>
<li>OS: Ubuntu 22.04 or Windows 10/11</li>
<li>CPU: Intel Corei7 (6 cores and 12 threads) or higher</li>
<li>GPU: NVIDIA Geforce RTX 2080 Ti or higher</li>
<li>For more information <a href="https://tier4.github.io/AWSIM/">click here</a></li>
</ul>
<p>Autoware and AWSIM PCs should be located in the same network.
If they are located in the same network, topic communication between PCs is basically possible without any additional settings. In the unlikely event that topic communication is not possible, please disable the firewall or review the rules.</p>
<h2 id="environment-setup">Environment Setup</h2>
<h3 id="awsimubuntu">AWSIM(Ubuntu)</h3>
<h4 id="preparation">Preparation</h4>
<ul>
<li><p>Install Nvidia drivers</p>
<ol>
<li>add repository</li>
</ol>
<pre><code>sudo add-apt-repository ppa:graphics-drivers/ppa
</code></pre>
<ol start="2">
<li>update package list</li>
</ol>
<pre><code>sudo apt update
</code></pre>
<ol start="3">
<li>install</li>
</ol>
<pre><code>sudo ubuntu-drivers autoinstall
</code></pre>
<ol start="4">
<li>After rebooting, run the following command to confirm that the installation has completed.</li>
</ol>
<pre><code>nvidia-smi
</code></pre>
<p><img src="../images/setup/nvidia-smi.png" alt="nvidia-smi"></p>
</li>
<li><p>Install Vulkun</p>
<ol>
<li>update package list</li>
</ol>
<pre><code>sudo apt update
</code></pre>
<ol start="2">
<li>install libvulkan1</li>
</ol>
<pre><code>sudo apt install libvulkan1
</code></pre>
</li>
<li><p>Prepare the course</p>
<ol>
<li><a href="https://drive.google.com/file/d/1aduBKhYGI0mhhRbgu4B05pBTyFXcZsGN/view?usp=sharing">Download</a> the executable file for the competition and unzip it<br>
※Tutorial Environment</li>
<li>change permissions as shown in the figure<br>
<img src="../images/setup/permmision.png" alt="Change the permissions as shown in the figure "><br>
Double-click the file to launch it.</li>
<li>confirm that the following screen is displayed
<img src="../images/setup/awsim.png" alt="awsim"></li>
</ol>
</li>
</ul>
<h4 id="starting-awsim-in-a-docker-container">Starting AWSIM in a Docker container</h4>
<p>If you want to start AWSIM from a Docker container, please follow the steps below after installing a Docker image according to the Docker image preparation procedure (see below).</p>
<ol>
<li>extract the executable file for the convention in <code>aichallenge2023-sim/autoware</code> (Hereinafter, it is assumed to be located in <code>aichallenge2023-sim/autoware/AWSIM/AWSIM.x86_64</code>)</li>
<li>launch the Docker container</li>
</ol>
<pre><code> cd aichallenge2023-sim
 rocker --nvidia --x11 --user --net host --privileged --volume autoware:/aichallenge -- ghcr.io/automotiveaichallenge/aichallenge2023-sim/ autoware-universe-cuda:v1
</code></pre>
<ol start="3">
<li>execute the following in the container</li>
</ol>
<pre><code> export ROS_LOCALHOST_ONLY=1
 export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp
 export RCUTILS_COLORIZED_OUTPUT=1
 source /autoware/install/setup.bash
 /aichallenge/AWSIM/AWSIM.x86_64
</code></pre>
<h3 id="awsimwindows">AWSIM(Windows)</h3>
<ol>
<li><a href="https://drive.google.com/file/d/1L6jr9wttxA2aLl8IqC3xDXIuQUfjMTAJ/view?usp=sharing">Download</a> the executable file for the convention and unzip it.<br>
※Tutorial Environment</li>
<li>double-click the file to start it
Confirm that the following screen is displayed.
<img src="../images/setup/awsim.png" alt="awsim"></li>
</ol>
<h3 id="copy-map-data-pcd-osm">Copy map data (pcd, osm)</h3>
<p><img src="../images/setup/mapfiles.png" alt="mapfiles"></p>
<p>Map data is stored in AWSIM compressed files. Copy the osm and pcd files located in <code>AWSIM_Data/StreamingAssets/kashiwanoha2023_integ</code> to <code>aichallenge2023-sim/autoware/mapfile</code> and arrange them so that the file structure is as follows:</p>
<pre><code>aichallenge2023-sim
└ autoware
 └ mapfile
  ├ .gitkeep
  ├ lanelet2_map.osm
  └ pointcloud_map.pcd
</code></pre>
<h3 id="autoware">Autoware</h3>
<p>Docker image of Autoware (using CUDA) is available for this competition.</p>
<ul>
<li><p>Preparation<br>
Please install the following.</p>
<ul>
<li><a href="https://docs.docker.com/engine/install/ubuntu/">docker</a></li>
<li><a href="https://github.com/osrf/rocker">rocker</a>
<ul>
<li><a href="https://docs.docker.com/engine/install/ubuntu/">docker</a> * <a href="https://github.com/osrf/rocker">rocker</a> is used to use GUI such as Rviz and rqt in Docker container.</li>
</ul>
</li>
<li><a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html">Nvidia Container Toolkit</a></li>
<li><a href="https://packagecloud.io/github/git-lfs/install">git lfs</a></li>
<li><a href="https://docs.ros.org/en/humble/index.html">ROS2</a> (video confirmed version: Humble)</li>
</ul>
</li>
<li><p>Prepare and launch Docker image - Prepare Autoware</p>
<ol>
<li>get a Docker image</li>
</ol>
<pre><code>docker pull ghcr.io/automotiveaichallenge/aichallenge2023-sim/autoware-universe-cuda:v1
</code></pre>
<p>If the above method takes a long time or times out, you can use the following method.<br>
We have placed a tarball of the image at <a href="https://drive.google.com/file/d/1mOEpiN36UPe70NqiibloDcd_ewgMr_5P/view?usp=sharing">here</a>. Please use the following command</p>
<pre><code>docker load &lt; autoware-universe-cuda_v1.tar.gz
</code></pre>
<ol start="2">
<li>download the data for the competition</li>
</ol>
<pre><code>sudo apt install -y git-lfs
git lfs clone https://github.com/AutomotiveAIChallenge/aichallenge2023-sim
</code></pre>
<ol start="3">
<li>start rocker</li>
</ol>
<pre><code>cd . /aichallenge2023-sim
rocker --nvidia --x11 --user --net host --privileged --volume autoware:/aichallenge -- ghcr.io/automotiveaichallenge/aichallenge2023-sim/ autoware-universe-cuda:v1
</code></pre>
</li>
<li><p>Verify Autoware operation<br>
This section describes how to check the operation of Autoware using AWSIM.</p>
<ol>
<li>Start AWSIM.</li>
<li>Start Autoware.</li>
</ol>
<pre><code># In the Rocker container
export ROS_LOCALHOST_ONLY=1
export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp
export RCUTILS_COLORIZED_OUTPUT=1
cd /aichallenge/aichallenge_ws
colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release
source install/setup.bash
cd /aichallenge
ros2 launch autoware_launch e2e_simulator.launch.xml vehicle_model:=golfcart sensor_model:=awsim_sensor_kit map_path:=/aichallenge/mapfile
</code></pre>
<ol start="3">
<li><p>Confirm that the following screen (Rviz2) is displayed.<br>
<img src="../images/setup/autoware1.png" alt="autoware1"></p>
</li>
<li><p>Confirm that self-position estimation is done. If it is not estimated correctly, select <code>2D Pose Estimate</code> in the tab and drag the actual position of the vehicle.
<img src="../images/setup/autoware2.png" alt="autoware2"></p>
</li>
<li><p>Select the <code>2D Goal Pose</code> in the <code>Goal Pose</code> tab and drag to specify the goal position. Confirm that the route is displayed and <code>Routing</code> changes from <code>UNSET</code> to <code>SET</code> as shown in the image (it takes a little time after you specify it).
<img src="../images/setup/autoware3.png" alt="autoware3"></p>
</li>
<li><p>Press the <code>AUTO</code> button in <code>OperationMode</code> and confirm that self driving is started.
<img src="../images/setup/autoware4.png" alt="autoware4"></p>
</li>
</ol>
</li>
</ul>
</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/AutomotiveAIChallenge/aichallenge2023-sim/blob/main/documentation/docfx_project_en/setup/index.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>
        
      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>