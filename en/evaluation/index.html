<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Evaluation Enviroment </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Evaluation Enviroment ">
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://github.com/AutomotiveAIChallenge/aichallenge2023-sim/blob/feature/pages/documentation/docfx_project_en/evaluation/index.md/#L1">
  </head>

  <script type="module">
    import options from './../public/main.js'
    import { init } from './../public/docfx.min.js'
    init(options)
  </script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h2 id="evaluation-enviroment">Evaluation Enviroment</h2>

<h2 id="outline-of-execution-flow-in-an-online-environment">Outline of Execution Flow in an Online Environment</h2>
<p>To calculate the score, please submit only the package aichallenge_submit from the web page of the online evaluation environment, and the score will be automatically scored. After submission, the online evaluation environment uses the evaluation/ script below to evaluate the package in the following steps. 1.</p>
<ol>
<li><p>deployment of aichallenge_submit<br>
The uploaded aichallenge_submit.tar.gz file will be placed under evaluation/.</p>
</li>
<li><p>docker build<br>
evaluation/build.sh will be executed to create the docker image defined in the evaluation/Dockerfile. The steps to create this image are as follows. 1.</p>
<ol>
<li>extract the submitted aichallenge_submit.tar.gz to /aichallenge/aichallenge_ws/src/aichallenge_submit</li>
<li>run rosdep install and colcon build</li>
</ol>
</li>
<li><p>run simulation<br>
The simulator is launched in the online evaluation environment and the simulation is started.<br>
In the container, the following is performed by executing evaluation/main.bash: 1.</p>
<ol>
<li>start the ROS2 nodes</li>
<li>start of scenario
When executed in evaluation/run.sh, the result (score.json) is saved under evaluation/output.</li>
</ol>
</li>
</ol>
<h2 id="procedures-for-submitting-source-code">Procedures for Submitting Source Code</h2>
<ol>
<li><p>compress source code
Compress the source code in aichallenge_submit.</p>
<pre><code>cd evaluation
sh create_submit_tar.sh
</code></pre>
<p>Make sure that the compressed file is created in evaluation/aichallenge_submit.tar.gz. 2.</p>
</li>
<li><p>make sure that the file can be automatically executed in docker at ``evaluation/
Before uploading to the online evaluation environment, please confirm that you can build and run in a Docker container as in the online environment using your local environment by following the steps below.<br>
First, make sure the following files are located under evaluation/.</p>
<ul>
<li>aichallenge_submit.tar.gz<br>
Next, build the docker image containing the aichallenge_submit you created.</li>
</ul>
<pre><code>sh build.sh
```

   After the build is complete, use run.sh to launch the docker container and execute the scoring flow.

```
sh run.sh
```
Finally, check the score output to evaluation/output/score.json. 3.
</code></pre>
</li>
</ol>
<p>Upload the source code from the online evaluation environment web page
After logging in to the <a href="">web page</a>, follow the instructions on the screen and upload the aichallenge_submit.tar.gz file created in (1).</p>
<pre><code>After the upload is completed, the source build and simulation runs will be performed in sequence. 
* If the simulation finishes successfully, the message &quot;Scoring complete&quot; will be displayed, and the times for each of the distribution and evaluation scenarios will be displayed. The time of the last uploaded evaluation scenario is used as the final time in the ranking.
* If the scenario execution is successfully completed, but no score is output due to launch failure, etc., &quot;No result&quot; will be displayed, and if all checkpoints have not been passed, &quot;Checkpoint not passed&quot; will be displayed.
* If the build fails, Build error is displayed. Please reconfirm that you can build the Docker image by following the steps (1) and (2).
* If the simulator fails to run, a Simulator error will be displayed. In this case, there may be an internal error on the server side, so please upload the image again. If the error message is displayed repeatedly, please contact us.
/other) Inquiries, how to share information among participants, etc.
 You cannot upload new sources while the grading process is in progress. Uploading is limited to 3 times a day and will be reset at midnight Japan time.
</code></pre>
</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/AutomotiveAIChallenge/aichallenge2023-sim/blob/feature/pages/documentation/docfx_project_en/evaluation/index.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>
        
      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>